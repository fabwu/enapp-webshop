<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core" template="resources/templates/template.xhtml">

    <ui:define name="content">
        <h1>
            <h:outputFormat value="Webshop Home" />
        </h1>
        <br />
        <h:form id="product_form" acceptcharset="UTF-8" enctype="application/x-www-form-urlencoded;charset=UTF-8">
            <table>
                <tr>
                    <td><b>Name</b></td>
                    <td><b>Beschreibung</b></td>
                    <td><b>Preis</b></td>
                    <td></td>
                </tr>
                <ui:repeat value="#{product.productList}" var="singleProduct">
                    <tr>
                        <td><h:outputText value="#{singleProduct.name}" /></td>
                        <td><h:outputText value="#{singleProduct.description}" /></td>
                        <td><h:outputText value="#{singleProduct.unitprice}" /></td>
                        <td><h:inputText binding="#{quantityInput}" /> <h:commandButton value="+"
                                action="#{cart.addToCart(singleProduct, quantityInput.value)}" /></td>
                    </tr>
                </ui:repeat>
            </table>
        </h:form>
        <br />
        <h1>
            <h:outputFormat value="Warenkorb" />
        </h1>
        <br />
        <h:form id="purchase_form" acceptcharset="UTF-8" enctype="application/x-www-form-urlencoded;charset=UTF-8">
            <table>
                <tr>
                    <td><b>Name</b></td>
                    <td><b>Menge</b></td>
                    <td><b>Total</b></td>
                </tr>
                <ui:repeat value="#{cart.purchaseitemList}" var="purchaseItem">
                    <tr>
                        <td><h:outputText value="#{purchaseItem.product.name}" /></td>
                        <td><h:outputText value="#{purchaseItem.quantity}" /></td>
                        <td><h:outputText value="#{purchaseItem.totalprice}" /></td>
                    </tr>
                </ui:repeat>
            </table>
            <br />
            <h:commandButton value="Bestellen" action="#{cart.order()}" />
        </h:form>
        <br />
        <br />
        <h1>
            <h:outputFormat value="Bestellungen" />
        </h1>
        <br />
        <table>
            <tr>
                <td><b>Nr.</b></td>
                <td><b>Artikel</b></td>
                <td><b>Bestelldatum</b></td>
                <td><b>Status</b></td>
            </tr>
            <ui:repeat value="#{purchase.purchases}" var="singlePurchase">
                <tr>
                    <td><h:outputText value="#{singlePurchase.purchaseid}" /></td>
                    <td>
                        <ul>
                            <ui:repeat value="#{singlePurchase.purchaseitems}" var="purchaseitem">
                                <li><h:outputText value="#{purchaseitem.product.name}" /> <h:outputText
                                        value="&#160;" /> <h:outputText value="#{purchaseitem.quantity}" />x <h:outputText
                                        value="#{purchaseitem.product.unitprice}" />= <h:outputText
                                        value="#{purchaseitem.totalprice}" /></li>
                            </ui:repeat>

                        </ul>
                    </td>
                    <td><h:outputText value="#{singlePurchase.datetime}" /></td>
                    <td><h:outputText value="#{singlePurchase.state}" /></td>
                </tr>
            </ui:repeat>
        </table>
    </ui:define>
</ui:composition>